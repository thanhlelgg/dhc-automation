"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const analyzer_1=require("./analyzer"),stopWatch_1=require("./stopWatch");var constant_1=require("./constant");let reporter;function getReport(){return reporter||(reporter=new analyzer_1.Analyzer),reporter}function sendTelemetryEvent(e,t,r,n,a,o){const s=getReport();s&&s.event(e,t)}function captureTelemetry(e,t,r,n=!0){return function(a,o,s){const c=s.value;return s.value=function(...a){const o=new stopWatch_1.StopWatch;if(!n)return sendTelemetryEvent(e,t,o.startTime,void 0,r),c.apply(this,a);const s=c.apply(this,a);return s&&"function"==typeof s.then&&"function"==typeof s.catch?s.then(n=>(sendTelemetryEvent(e,t,o.startTime,o.elapsedTime,r),n)).catch(n=>{(r=r||{}).failed=!0,sendTelemetryEvent(e,t,o.elapsedTime,r,n)}):sendTelemetryEvent(e,t,o.startTime,o.elapsedTime,r),s},s}}exports.EventCategory=constant_1.EventCategory,exports.EventName=constant_1.EventName,exports.UserTimingVariable=constant_1.UserTimingVariable,exports.IAnalyzerSym=Symbol("IAnalyzer"),exports.sendTelemetryEvent=sendTelemetryEvent,exports.captureTelemetry=captureTelemetry;
//# sourceMappingURL=../../debug/telemetry/index.js.map
